---
title: Apache Kafka の概要
description: Apache Kafka の概要
kt: 5342
audience: Data Engineer, Data Architect, Data Analyst
doc-type: tutorial
activity: develop
exl-id: 7b600c79-03c5-46fc-9ac9-a15599608c35
source-git-commit: cc7a77c4dd380ae1bc23dc75608e8e2224dfe78c
workflow-type: tm+mt
source-wordcount: '992'
ht-degree: 0%

---

# 15.1 Apache Kafka の概要

## 15.1.1 はじめに

すべての組織は、データの観点から非常にシンプルな方法で開始します。 組織のデータエコシステムは、1 つのソースシステムと 1 つのターゲットから始まります。 ソース・システムはターゲット・システムにデータを送信し、それです。 簡単でしょ？
それがそれほど単純なままでいれば。 組織は、シンプルなセットアップをすぐに上回り、ソース・システムとターゲット・システムの数が急速に増加します。 これらの様々なソースや宛先はすべて、相互にデータを交換する必要があり、これらはすぐに非常に複雑になります。
例えば、組織に 4 つのソースと 6 つの宛先があり、これらのアプリケーションがすべて相互に通信する必要がある場合、24 の統合を構築する必要があります。これらの統合には、それぞれ独自の困難が伴います。

- プロトコル：データの転送方法（TCP、HTTP、REST、FTP など）
- データ形式：データを解析する方法（バイナリ、CSV、JSON、Parquet など）
- データスキーマと変化：データモデルとは何ですか？また、どのように発展するのでしょうか？

さらに、ソースシステムを宛先システムに接続するたびに、その接続からの負荷が増加します。

どうやって解決するの？ Apache Kafka が登場する場所です。 Apache Kafka を使用すると、組織は、共通の高スループットの分散メッセージングシステムを提供することで、データストリームとシステムを切り離すことができます。 ソースシステムはデータを Apache Kafka に送信し、宛先システムは Apache Kafka のデータを使用します。

ビジネスが管理する必要のあるあらゆるタイプのデータソースについて考えてみましょう。

- web サイトイベント
- モバイルアプリイベント
- POS イベント
- CRM データ
- callcenter データ
- 取引履歴
- ...

また、あらゆるタイプの宛先がビジネスのエコシステムで使用される場合、そのエコシステムでは、すべての宛先がこれらのソースシステムからのデータを必要とする可能性があります。

- CRM
- データレイク
- 電子メールシステム
- 監査
- analytics
- ...

Apache Kafka はLinkedInが創設し、現在は主に Confluent が管理するオープンソースプロジェクトです。
Apache Kafka は、フォールトトレラントな分散型の耐障害性アーキテクチャを提供します。 100 台のブローカーに対して水平に拡大でき、1 秒あたり数百万通のメッセージに拡大できます。 10 ms 未満の待ち時間で高いパフォーマンスを提供し、リアルタイムの使用例に最適です。

次に 2 つの使用例を示します。

- メッセージングシステム
- アクティビティの追跡
- 様々な場所からの指標の収集
- アプリケーションログの収集
- ストリーム処理（Kafka Streams API または Spark を使用）
- システム依存関係の分離
- Spark、Flink、Storm、Hadoop、その他多くのビッグデータテクノロジーとの統合。

例：

- Netflix は Kafka を使用して、テレビ番組を見ている間にリアルタイムでレコメンデーションを適用します
- Uber は Kafka を使用して、ユーザー、タクシー、旅行データをリアルタイムで収集し、需要の計算と予測を行い、サージ価格をリアルタイムで計算します
- linkedInは、スパムを防ぐために Kafka を使用し、ユーザーインタラクションを収集して、より優れた接続レコメンデーションをリアルタイムで提供します

これらすべての使用例で、Kafka は輸送メカニズムとしてのみ使用されます。 Kafka は、アプリケーション間でのデータ移動が非常に得意です。

## 15.1.2 Kafka の用語

### メッセージ

メッセージとは、システムが Kafka に送信する通信です。 メッセージにはペイロードが含まれ、ペイロードにはデータ要素が含まれます。 例えば、Web サイトがAdobe Experience Platformに送信するエクスペリエンスイベントは、メッセージと見なされます。

### トピック、パーティション、オフセット

トピックは、データベース内のテーブルに似た、特定のデータストリームです。 必要な数のトピックを含めることができ、トピックの名前で識別されます。 トピックはパーティションに分割されます。 各パーティションは順序付けされ、パーティション内の各メッセージは増分 ID を取得します。これは、と呼ばれます。 **オフセット**. メッセージは、トピックのパーティション上に格納され、オフセットを使用して参照されます。 メッセージは一定の期間のみ保持されます（デフォルトは 1 週間）。 メッセージがパーティションに書き込まれると、もう変更できなくなります。

### ブローカー

ブローカーは、サーバーに似ています。 Kafka クラスタは、複数のブローカ（サーバ）で構成されます。 各ブローカーは ID で識別され、特定のトピックパーティションを含みます。

### レプリケーション

カフカは分散システムです 分散システムの重要な点の 1 つは、データが安全に保存され、レプリケーションが必要になることです。 結局、あるブローカー（サーバー）がダウンした場合でも、別のブローカー（サーバー）は、ダウンしたブローカーに最初に保存されたメッセージに対して、引き続きアクセスできるはずです。 複数のブローカーをまたいでメッセージのコピーを作成し、データが失われないことを保証します。

### 生産者

Kafka にはどのようにデータが送信されますか？ それが生産者の役割です プロデューサーは、ソースシステムに接続し、ソースシステムからデータを取得し、そのデータをトピックにパーティションに書き込みます。 Kafka クラスタの設定に基づいて、プロデューサーは、書き込むブローカーとパーティションを自動的に把握します。 複数のブローカーとレプリケーション戦略を備えた分散システムでは、プロデューサーは複数のブローカーに対してランダムにデータを保存します。つまり、ロードバランシングは自動的に行われます。

### メッセージキー

プロデューサーは、メッセージと共にキーを送信することを選択できます。 キーには、任意の文字列、数値などを指定できます。 キーが指定されていない場合、メッセージはブローカーにランダムに送信されます。 キーが送信された場合、そのキーのすべてのメッセージは常に同じパーティションに送信されます。 メッセージキー（など）は、特定のフィールドに基づいてメッセージを並べ替えるために使用します。

### 消費者

コンシューマーは、Apache Kafka トピックからデータを読み取り、そのデータを宛先システムと共有します。 消費者は、読み取り元のブローカーを把握しています。 データは、各パーティション内で順にコンシューマーによって読み取られます。 消費者は、消費者グループのデータを読み取ります。

### Zookeeper

ZooKeeper は基本的に、階層型のキー値ストアを提供する分散システム向けのサービスで、大規模な分散システム向けの分散構成サービス、同期サービス、および命名レジストリを提供するために使用されます。 Zookeeper は Apache Kafka を使用する前に実行する必要があります。Zookeeper は Kafka の儀式のマスターのようなもので、Kafka がイベントを生成し消費する間に、バックエンドで分散サービスを管理します。

この練習は終わりました。

次のステップ： [15.2 Kafka クラスターのインストールと設定](./ex2.md)

[モジュール 15 に戻る](./aep-apache-kafka.md)

[すべてのモジュールに戻る](../../overview.md)
